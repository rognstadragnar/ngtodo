{"version":3,"sources":["../src/Wrapper.js"],"names":[],"mappings":"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","file":"Wrapper.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport mkdirp from 'mkdirp';\nimport webpack from 'webpack';\nimport Wrapper from '../../lib/wrappers/Wrapper';\nimport Watcher from '../../lib/wrappers/Watcher';\nimport options from '../../lib/options';\nimport caches from '../../lib/caches';\nimport utils from './utils';\nimport basic_bundle from './test_bundles/basic_bundle/webpack.config';\nimport library_bundle from './test_bundles/library_bundle/webpack.config';\n\nlet assert = utils.assert;\nlet TEST_OUTPUT_DIR = utils.TEST_OUTPUT_DIR;\n\n// Ensure we have a clean slate before and after each test\nbeforeEach(() => {\n  utils.cleanTestOutputDir();\n  caches.clear();\n});\nafterEach(() => {\n  utils.cleanTestOutputDir();\n  caches.clear();\n});\n\ndescribe('Wrapper', () => {\n  it('should be a function', () => {\n    assert.isFunction(Wrapper);\n  });\n  it('should accept options and config arguments', () => {\n    let opts = {};\n    let config = {};\n    let wrapper = new Wrapper(opts, config);\n    assert.strictEqual(wrapper.opts, opts);\n    assert.strictEqual(wrapper.config, config);\n    assert.isFalse(wrapper.opts.watch);\n    assert.isNumber(wrapper.opts.aggregateTimeout);\n    assert.isUndefined(wrapper.opts.poll);\n    assert.equal(wrapper.opts.outputPath, '');\n    assert.equal(wrapper.opts.staticRoot, '');\n    assert.equal(wrapper.opts.staticUrl, '');\n  });\n  it('should accept a string as a config option and import the file specified', (done) => {\n    let wrapper = new Wrapper({\n      config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js')\n    });\n    wrapper.getConfig((err, config) => {\n      assert.isNull(err);\n      assert.deepEqual(config, basic_bundle());\n      done();\n    });\n  });\n  it('should compile a basic bundle', (done) => {\n    let wrapper = new Wrapper({}, basic_bundle());\n\n    wrapper.compile((err, stats) => {\n      assert.isNull(err);\n      assert.isObject(stats);\n\n      let existsAt = stats.assets[0];\n      assert.isString(existsAt);\n      fs.readFile(existsAt, (err, contents) => {\n        assert.isNull(err);\n        let compiledWrapper = contents.toString();\n        assert.include(compiledWrapper, '__BASIC_BUNDLE_ENTRY_TEST__');\n        assert.include(compiledWrapper, '__BASIC_BUNDLE_REQUIRE_TEST__');\n        done();\n      });\n    });\n  });\n  it('should compile a bundle with multiple chunks', (done) => {\n    let wrapper = new Wrapper({\n      config: path.join(__dirname, 'test_bundles', 'multiple_chunks', 'webpack.config.js')\n    });\n\n    wrapper.compile((err, data) => {\n      assert.isNull(err);\n      assert.isObject(data);\n\n      assert.isObject(data.output.one);\n      assert.isObject(data.output.two);\n      assert.isObject(data.output.three);\n\n      assert.isString(data.output.one.js[0]);\n      assert.isString(data.output.two.js[0]);\n      assert.isString(data.output.three.js[0]);\n\n      let contents = fs.readFileSync(data.output.one.js[0]).toString();\n      assert.include(contents, '__ONE__');\n\n      contents = fs.readFileSync(data.output.two.js[0]).toString();\n      assert.include(contents, '__TWO__');\n\n      contents = fs.readFileSync(data.output.three.js[0]).toString();\n      assert.include(contents, '__THREE__');\n      done();\n    });\n  });\n  it('should expose the output options object', (done) => {\n    let wrapper = new Wrapper({}, library_bundle());\n\n    wrapper.compile((err, data) => {\n      assert.isNull(err);\n      assert.isObject(data.outputOptions);\n      assert.equal(data.outputOptions.library, 'foo');\n      assert.equal(data.outputOptions.libraryTarget, 'var');\n      done();\n    });\n  });\n  describe('#getCompiler', () => {\n    it('should not preserved the compiler', (done) => {\n      let wrapper = new Wrapper({}, {});\n\n      wrapper.getCompiler((err, compiler1) => {\n        assert.isNull(err);\n        assert.isObject(compiler1);\n        wrapper.getCompiler((err, compiler2) => {\n          assert.isNull(err);\n          assert.isObject(compiler2);\n          assert.notStrictEqual(compiler1, compiler2);\n          done();\n        });\n      });\n    });\n  });\n  describe('#getWatcher', () => {\n    it('should provide an instance of Watcher', (done) => {\n      let wrapper = new Wrapper({watch: true}, {});\n\n      wrapper.getWatcher((err, watcher) => {\n        assert.isNull(err);\n        assert.instanceOf(watcher, Watcher);\n        done();\n      });\n    });\n    it('should preserve the watcher', (done) => {\n      let wrapper = new Wrapper({watch: true}, {});\n\n      wrapper.getWatcher((err, watcher1) => {\n        assert.isNull(err);\n        assert.isObject(watcher1);\n\n        wrapper.getWatcher((err, watcher2) => {\n          assert.isNull(err);\n          assert.isObject(watcher2);\n\n          assert.strictEqual(watcher2, watcher1);\n          done();\n        });\n      });\n    });\n  });\n  describe('#generateOutput', () => {\n    it('should produce a serializable form of the compilation\\'s output', (done) => {\n      let wrapper = new Wrapper({\n        watch: false,\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js')\n      });\n\n      wrapper.onceDone((err, data) => {\n        assert.isNull(err);\n        assert.isObject(data);\n\n        // deepEqual checks hasOwnProperty\n        delete data.buildOptions.poll;\n\n        let serialized = JSON.stringify(data);\n        assert.deepEqual(JSON.parse(serialized), data);\n\n        done();\n      });\n    });\n  });\n  describe('#onceDone', () => {\n    it('should not preserve errors and stats from the compilation, if not watching', (done) => {\n      let wrapper = new Wrapper({\n        watch: false,\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js')\n      });\n\n      wrapper.onceDone((err1, stats1) => {\n        assert.isNull(err1);\n        assert.isObject(stats1);\n\n        wrapper.onceDone((err2, stats2) => {\n          assert.isNull(err2);\n          assert.isObject(stats2);\n          assert.notStrictEqual(stats2, stats1);\n          done();\n        });\n      });\n    });\n    it('should preserve errors and stats from the compilation, if watching', (done) => {\n      let wrapper = new Wrapper({\n        watch: true,\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js')\n      });\n\n      wrapper.onceDone((err1, stats1) => {\n        assert.isNull(err1);\n        assert.isObject(stats1);\n\n        wrapper.onceDone((err2, stats2) => {\n          assert.isNull(err2);\n          assert.isObject(stats2);\n          assert.deepEqual(stats2, stats1);\n          done();\n        });\n      });\n    });\n    it('should rebuild wrappers when onceDone is called', (done) => {\n      let entry = path.join(TEST_OUTPUT_DIR, 'rebuilt_bundles', 'entry.js');\n      let output = path.join(TEST_OUTPUT_DIR, 'rebuilt_bundles', 'output.js');\n\n      let wrapper = new Wrapper({\n        watch: false\n      }, {\n        context: path.dirname(entry),\n        entry: './' + path.basename(entry),\n        output: {\n          path: path.dirname(output),\n          filename: path.basename(output)\n        }\n      });\n\n      mkdirp.sync(path.dirname(entry));\n      fs.writeFileSync(entry, 'module.exports = \"__REBUILT_TEST_ONE__\";');\n\n      wrapper.onceDone((err, stats) => {\n        assert.isNull(err);\n        assert.isObject(stats);\n        assert.equal(output, stats.assets[0]);\n        let contents = fs.readFileSync(output);\n        assert.include(contents.toString(), '__REBUILT_TEST_ONE__');\n\n        fs.writeFileSync(entry, 'module.exports = \"__REBUILT_TEST_TWO__\";');\n        wrapper.onceDone((err, stats) => {\n          assert.isNull(err);\n          assert.isObject(stats);\n          assert.equal(output, stats.assets[0]);\n          contents = fs.readFileSync(output);\n          assert.include(contents.toString(), '__REBUILT_TEST_TWO__');\n\n          fs.writeFileSync(entry, 'module.exports = \"__REBUILT_TEST_THREE__\";');\n          wrapper.onceDone((err, stats) => {\n            assert.isNull(err);\n            assert.isObject(stats);\n            assert.equal(output, stats.assets[0]);\n            contents = fs.readFileSync(output);\n            assert.include(contents.toString(), '__REBUILT_TEST_THREE__');\n            done();\n          });\n        });\n      });\n    });\n  });\n  describe('#opts.aggregateTimeout', () => {\n    it('should default to 200', () => {\n      let wrapper = new Wrapper();\n      assert.equal(wrapper.opts.aggregateTimeout, 200);\n\n      wrapper = new Wrapper({\n        aggregateTimeout: 300\n      });\n\n      assert.equal(wrapper.opts.aggregateTimeout, 300);\n    });\n    it('should be passed to the watcher', (done) => {\n      let wrapper = new Wrapper({}, {});\n      wrapper.getWatcher((err, watcher) => {\n        assert.isNull(err);\n        assert.equal(watcher.opts.aggregateTimeout, 200);\n\n        wrapper = new Wrapper({\n          aggregateTimeout: 300\n        }, {});\n\n        wrapper.getWatcher((err, watcher) => {\n          assert.isNull(err);\n          assert.equal(watcher.opts.aggregateTimeout, 300);\n          done();\n        });\n      });\n    });\n  });\n  describe('#opts.watch', () => {\n    it('should default to false', () => {\n      let wrapper = new Wrapper();\n      assert.isFalse(wrapper.opts.watch);\n\n      wrapper = new Wrapper({\n        watch: true\n      });\n\n      assert.isTrue(wrapper.opts.watch);\n    });\n    it('should cause file changes to trigger bundle rebuilds', function(done) {\n      this.timeout(utils.watcherTimeout);\n\n      let entry = path.join(TEST_OUTPUT_DIR, 'watch_source', 'entry.js');\n      let output = path.join(TEST_OUTPUT_DIR, 'watch_source', 'output.js');\n\n      let wrapper = new Wrapper({\n        watch: true,\n        aggregateTimeout: utils.aggregateTimeout\n      }, {\n        context: path.dirname(entry),\n        entry: './' + path.basename(entry),\n        output: {\n          path: path.dirname(output),\n          filename: path.basename(output)\n        }\n      });\n\n      mkdirp.sync(path.dirname(entry));\n      fs.writeFileSync(entry, 'module.exports = \"__WATCH_TEST_ONE__\";');\n\n      wrapper.onceDone((err, stats) => {\n        assert.isNull(err);\n        assert.isObject(stats);\n        assert.equal(output, stats.assets[0]);\n        let contents = fs.readFileSync(output);\n        assert.include(contents.toString(), '__WATCH_TEST_ONE__');\n\n        setTimeout(() => {\n          fs.writeFileSync(entry, 'module.exports = \"__WATCH_TEST_TWO__\";');\n\n          setTimeout(() => {\n            wrapper.onceDone((err, stats) => {\n              assert.isNull(err);\n              assert.isObject(stats);\n              assert.equal(output, stats.assets[0]);\n              contents = fs.readFileSync(output);\n              assert.include(contents.toString(), '__WATCH_TEST_TWO__');\n\n              fs.writeFileSync(entry, 'module.exports = \"__WATCH_TEST_THREE__\";');\n\n              setTimeout(() => {\n                wrapper.onceDone((err, stats) => {\n                  assert.isNull(err);\n                  assert.isObject(stats);\n                  assert.equal(output, stats.assets[0]);\n                  contents = fs.readFileSync(output);\n                  assert.include(contents.toString(), '__WATCH_TEST_THREE__');\n                  done();\n                });\n              }, utils.watcherWait);\n            });\n          }, utils.watcherWait);\n        }, utils.watcherWarmUpWait);\n      });\n    });\n    it('should indicate any errors which occurred during background compilation', function(done) {\n      this.timeout(utils.watcherTimeout);\n\n      let entry = path.join(TEST_OUTPUT_DIR, 'watched_file_error', 'entry.js');\n      let output = path.join(TEST_OUTPUT_DIR, 'watched_file_error', 'output.js');\n\n      let wrapper = new Wrapper({\n        watch: true,\n        aggregateTimeout: utils.aggregateTimeout\n      }, {\n        context: path.dirname(entry),\n        entry: './' + path.basename(entry),\n        output: {\n          path: path.dirname(output),\n          filename: path.basename(output)\n        }\n      });\n\n      mkdirp.sync(path.dirname(entry));\n      fs.writeFileSync(entry, 'module.exports = \"__WATCHED_FILE_ERROR_ONE__\";');\n\n      wrapper.onceDone((err1, stats1) => {\n        assert.isNull(err1);\n        assert.isObject(stats1);\n        assert.equal(output, stats1.assets[0]);\n        let contents = fs.readFileSync(output);\n        assert.include(contents.toString(), '__WATCHED_FILE_ERROR_ONE__');\n\n        setTimeout(() => {\n          fs.writeFileSync(entry, '+?');\n\n          setTimeout(() => {\n            wrapper.onceDone((err2, stats2) => {\n              assert.instanceOf(err2, Error);\n              assert.isObject(stats2);\n\n              wrapper.onceDone((err3, stats3) => {\n                assert.instanceOf(err3, Error);\n                assert.isObject(stats3);\n                assert.strictEqual(err3, err2);\n                assert.deepEqual(stats3, stats2);\n\n                done();\n              });\n            });\n          }, utils.watcherWait);\n        }, utils.watcherWarmUpWait);\n      });\n    });\n    it('should continue to compile if a file change introduces an error', function(done) {\n      this.timeout(utils.watcherTimeout);\n\n      let entry = path.join(TEST_OUTPUT_DIR, 'watched_file_continues_to_compile', 'entry.js');\n      let output = path.join(TEST_OUTPUT_DIR, 'watched_file_continues_to_compile', 'output.js');\n\n      let wrapper = new Wrapper({\n        watch: true,\n        aggregateTimeout: utils.aggregateTimeout\n      }, {\n        context: path.dirname(entry),\n        entry: './' + path.basename(entry),\n        output: {\n          path: path.dirname(output),\n          filename: path.basename(output)\n        }\n      });\n\n      mkdirp.sync(path.dirname(entry));\n      fs.writeFileSync(entry, 'module.exports = \"__WATCHED_FILE_ERROR_ONE__\";');\n\n      wrapper.onceDone((err, stats) => {\n        assert.isNull(err);\n        assert.isObject(stats);\n        assert.equal(output, stats.assets[0]);\n        let contents = fs.readFileSync(output);\n        assert.include(contents.toString(), '__WATCHED_FILE_ERROR_ONE__');\n\n        setTimeout(() => {\n          fs.writeFileSync(entry, '+?');\n\n          setTimeout(() => {\n            wrapper.onceDone((err, stats) => {\n              assert.instanceOf(err, Error);\n              assert.isObject(stats);\n\n              fs.writeFileSync(entry, '__WATCHED_FILE_ERROR_TWO__');\n\n              setTimeout(() => {\n                wrapper.onceDone((err, stats) => {\n                  assert.isNull(err);\n                  assert.isObject(stats);\n                  assert.equal(output, stats.assets[0]);\n                  let contents = fs.readFileSync(output);\n                  assert.include(contents.toString(), '__WATCHED_FILE_ERROR_TWO__');\n                  done();\n                });\n              }, utils.watcherWait);\n            });\n          }, utils.watcherWait);\n        }, utils.watcherWarmUpWait);\n      });\n    });\n  });\n  describe('#opts.outputPath', () => {\n    it('should default to an empty string', () => {\n      let wrapper = new Wrapper();\n      assert.equal(wrapper.opts.outputPath, '');\n\n      wrapper = new Wrapper({\n        outputPath: '/foo/bar'\n      });\n\n      assert.equal(wrapper.opts.outputPath, '/foo/bar');\n    });\n    it('should set a config\\'s output.path prop', (done) => {\n      let wrapper = new Wrapper({\n        config: path.join(__dirname, 'test_bundles', 'output_path_bundle', 'webpack.config.js'),\n        outputPath: '/some/path/'\n      });\n\n      wrapper.getConfig((err, config) => {\n        assert.isNull(err);\n        assert.equal(config.context, 'context');\n        assert.equal(config.entry, 'entry');\n        assert.equal(config.output.path, '/some/path/');\n        assert.equal(config.output.filename, 'test.js');\n        done();\n      });\n    });\n  });\n  describe('#cache', () => {\n    it('should be able to populate a cache', (done) => {\n      let wrapper = new Wrapper({\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js'),\n        watch: false\n      });\n\n      wrapper.onceDone((err, data) => {\n        assert.isNull(err);\n        assert.isObject(data);\n\n        caches.get(wrapper.opts, (_err, _data) => {\n          assert.isNull(_err);\n          assert.isObject(_data);\n\n          assert.deepEqual(_data, data);\n\n          done();\n        });\n      });\n    });\n  });\n  describe('#data.urls', () => {\n    it('should create urls relative to staticRoot', (done) => {\n      let wrapper = new Wrapper({\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js'),\n        outputPath: path.join(TEST_OUTPUT_DIR, 'url', 'test'),\n        staticRoot: TEST_OUTPUT_DIR,\n        staticUrl: '/static/'\n      });\n\n      wrapper.compile((err, stats) => {\n        assert.isNull(err);\n        assert.isObject(stats);\n\n        assert.isObject(stats.urls);\n        assert.equal(stats.urls.main.js[0], '/static/url/test/output.js');\n\n        done();\n      });\n    });\n    it('should handle staticUrl without a trailing slash', (done) => {\n      let wrapper = new Wrapper({\n        config: path.join(__dirname, 'test_bundles', 'basic_bundle', 'webpack.config.js'),\n        outputPath: path.join(TEST_OUTPUT_DIR, 'url', 'test'),\n        staticRoot: TEST_OUTPUT_DIR,\n        staticUrl: '/static'\n      });\n\n      wrapper.compile((err, stats) => {\n        assert.isNull(err);\n        assert.isObject(stats);\n\n        assert.isObject(stats.urls);\n        assert.equal(stats.urls.main.js[0], '/static/url/test/output.js');\n\n        done();\n      });\n    });\n  });\n  describe('config factory', () => {\n    it('should call the factory with the opts object', (done) => {\n      let opts = {\n        config: (_opts) => {\n          assert.strictEqual(_opts, opts);\n          done();\n        }\n      };\n      let wrapper = new Wrapper(opts);\n\n      wrapper.getConfig(() =>{});\n    });\n  });\n  describe('#opts.hmr', () => {\n    it('should add hmr settings and entries', (done) => {\n      let publicPath = '/static/foo';\n\n      let wrapper = new Wrapper({\n        config: () => { return {}; },\n        hmr: true,\n        hmrRoot: 'http://test.com',\n        outputPath: '/foo/bar',\n        publicPath: publicPath\n      });\n\n      wrapper.getConfig((err, config) => {\n        assert.isNull(err);\n\n        assert.isArray(config.plugins);\n        assert.isObject(config.output);\n        assert.isArray(config.entry);\n\n        assert.include(config.entry[0], 'webpack-build/lib/hmr/client?{\"');\n        assert.equal(config.entry[1], 'webpack/hot/only-dev-server');\n\n        assert.equal(config.output.publicPath, publicPath + '/');\n\n        assert.equal(config.recordsPath, '/foo/bar/webpack.records-' + wrapper.opts.buildHash + '.json');\n\n        done();\n      });\n    });\n  });\n});"]}